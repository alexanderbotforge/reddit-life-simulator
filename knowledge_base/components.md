# Components

**Версия документа:** 1.0.2  
**Последнее обновление:** 2025-02-01  
**Описание:** Описание компонентов системы Reddit Life Simulator.

---

## 1. Очередь жизни (Life Queue)

- **Назначение:** Последовательная обработка аккаунтов; в каждый момент активен строго один аккаунт.
- **Поведение:** Исключает корреляции по таймингам и нагрузке между аккаунтами.
- **Расширяемость:** Порядок и политики очереди можно уточнять в конфигурации.

---

## 2. Браузерная эмуляция

- **Назначение:** Каждый аккаунт живёт в рамках реального браузера (Playwright) с постоянным профилем.
- **Реализация (v1.0.2):** Профиль в `state/browser_profiles/<account>` или `profile_dir` из конфига; прокси из конфига; Reddit, скролл, upvote (1–2/сессию), редко подписка; детекция рисков (капча, редирект, таймаут).
- **Идентичность:** Профиль браузера, локальное хранилище, кэш, cookies, стабильные параметры окружения.
- **Ограничение v1.0:** API Reddit для действий или наблюдения не используется.

---

## 3. Конфигурация аккаунта

- **Содержит:** ритм жизни, лимиты, параметры активности, прокси, режимы поведения.
- **Особенности:** Поддержка флагов паузы/возобновления; изменения не применяются во время активной жизни аккаунта.
- **Связь:** Один аккаунт — один прокси, один часовой пояс, один язык, один регион (не меняются в v1.0).

---

## 4. Поведенческая модель

- **Сессии:** Нерегулярные, разной длительности, без фиксированного сценария.
- **Допустимые действия (v1.0):** изредка upvote, очень редко подписка на сабреддиты (не на пользователей).
- **Ограничения:** Не более 1–2 upvote за сессию; комментарии отключены.
- **Усталость:** Влияет на длительность сессий и количество действий; возможны дни без активности.

_Подробнее в [logic.md](logic.md)._

---

## 5. Контроль рисков

- **Сигналы:** капчи, редиректы, аномальные задержки, ошибки интерфейса, нестандартное поведение страницы.
- **Реакция:** замедление, переход в cooldown на срок от суток до нескольких дней, фиксация причины.
- **Риск:** Накопительное состояние, влияющее на дальнейшее поведение.

---

## 6. Хранение состояния

- **По аккаунту:** история сессий, усталость, действия, риски, паузы.
- **Общее:** сводный файл для отчётности.
- **Цель:** Устойчивость и восстановление, а не аналитика в реальном времени.

---

## 7. Отчётность

- **Частота:** Ежедневно (отправка в 23:58 по расписанию или при `--send-daily-report`).
- **Канал:** Telegram (Bot API; токен и chat_id из `.env`: TELEGRAM_BOT_TOKEN, TELEGRAM_CHAT_ID).
- **Содержание:** краткая информация по каждому аккаунту (время онлайна, количество действий, уровень риска).
- **Назначение:** Наблюдение, не оперативное управление.

---

## Changelog

| Версия | Дата | Изменения |
|--------|------|-----------|
| 1.0.0 | 2025-02-01 | Первоначальная структура документа |
| 1.0.2 | 2025-02-01 | Playwright, Telegram из .env, отчёт в 23:58 |
